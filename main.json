{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Main",
  "description": "Require fields determined by the DST in the Main tab for Projects.",
  "$id": "main.json",
  "version": "0.0.4",
  "type": "object",
  "properties": {
    "metadata": {
      "$ref": "#/definitions/Metadata"
    }
  },
  "required": [
    "metadata"
  ],
  "definitions": {
    "Metadata": {
      "type": "object",
      "properties": {
        "resourceInfo": {
          "$ref": "#/definitions/ResourceInfo"
        }
      },
      "required": [
        "resourceInfo"
      ],
      "title": "Metadata"
    },
    "ResourceInfo": {
      "type": "object",
      "properties": {
        "status": {
          "$ref": "#/definitions/Status"
        },
        "citation": {
          "$ref": "#/definitions/Citation"
        },
        "pointOfContact": {
          "$ref": "#/definitions/PointOfContact"
        },
        "timePeriod": {
          "$ref": "#/definitions/TimePeriod"
        }
      },
      "errorMessage": {
        "required": {
          "citation": "Project citation section is required. Citation information must include, at minimum, title, date (e.g. acquisition, creation, revision), responsible parties, and online resource. Identifiers should be included, if applicable.",
          "pointOfContact": "Project personnel are required to be listed under the 'Points of Contact' section. At least one person must be listed as 'pointOfContact'. Additional personnel roles should include 'AKRegionDataTrustee', 'AKRegionDataSteward', 'AKRegionDataCustodian', and 'principalInvestigator'.",
          "status": "Project status is required. Choose status from the following options: completed, onGoing, proposed, or accepted.",
          "timePeriod": "Project start and/or end dates are required."
        }
      },
      "required": [
        "citation",
        "pointOfContact",
        "status",
        "timePeriod"
      ],
      "title": "ResourceInfo"
    },
    "PointOfContact": {
      "type": "array",
      "contains": {
        "properties": {
          "role": {
            "const": "pointOfContact",
            "errorMessage": "Must contain at least one pointOfContact"
          }
        },
      },
      "required": [
        "role"
      ],
      "title": "PointOfContact"
    },
    "Citation": {
      "type": "object",
      "properties": {
        "responsibleParty": {
          "type": "array",
          "minItems": 1,
          "contains": {
            "properties": {
              "role": {
                "const": "pointOfContact",
                "errorMessage": "One role must be point of contact."
              }
            }
          },
          "errorMessage": {
            "minItems": "At least one responsibleParty is required in the resource citation.",
            "contains": "At least one point of contact should be present in citation."
          }
        },
        "date": {
          "type": "array",
          "minItems": 1,
          "errorMessage": "At least one date should be provided."
        },
        "onlineResource": {
          "type": "array",
          "minItems": 1,
          "errorMessage": {
            "minItems": "At least one onlineResource should be provided. A link to the project Regional Data Repository folder can be used if no other online resource exists yet."
          }
        }
      },
      "required": [
        "responsibleParty",
        "date",
        "onlineResource"
      ],
      "errorMessage": {
        "date": "At least one date must be provided for the citation.",
        "onlineResource": "At least one onlineResource should be provided. A link to the project Regional Data Repository folder can be used if no other online resource exists yet."
      },
      "title": "Citation"
    },
    "Status": {
      "type": "array",
      "contains": {
        "type": "string",
        "enum": [
          "completed",
          "onGoing",
          "proposed",
          "accepted"
        ],
        "errorMessage": "Status must be one of: 'completed', 'onGoing', 'proposed', or 'accepted'"
      },
      "title": "Status"
    },
    "TimePeriod": {
      "type": "object",
      "properties": {
        "dateTime": {
          "type": "object",
          "minItems": 1
        }
      },
      "title": "TimePeriod"
    }
  }
}
